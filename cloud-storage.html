<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Cloud Storage Plans - Odelya Cloud Digital Locker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
        import { getFirestore, doc, getDoc, setDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";
        
        const firebaseConfig = {
            apiKey: "AIzaSyA9Rg_P5jp3jHYP91LqYrO6fNVxSKn-NvA",
            authDomain: "odelya-user-data.firebaseapp.com",
            projectId: "odelya-user-data",
            storageBucket: "odelya-user-data.firebasestorage.app",
            messagingSenderId: "590231118790",
            appId: "1:590231118790:web:572c355c8826ad9c9148c7",
            measurementId: "G-9SWTR9V32R"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        
        window.firebaseDb = db;
        window.firebaseDoc = doc;
        window.getDoc = getDoc;
        window.setDoc = setDoc;
        window.onSnapshot = onSnapshot;
    </script>
    
    <style>
        /* ====== CLOUD STORAGE PAGE STYLES ====== */
        /* Blue gradient theme matching your brand */
        .storage-hero {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            color: #1565c0;
            padding: 60px 20px 40px;
            text-align: center;
        }
        
        .storage-hero h1 {
            font-size: 3rem;
            margin-bottom: 15px;
            font-weight: 700;
            color: #0d47a1;
        }
        
        .storage-hero p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto 20px;
            color: #1976d2;
        }
        
        .storage-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        /* Introduction Section */
        .intro-section {
            background: white;
            border-radius: 15px;
            padding: 40px;
            margin-bottom: 50px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            border: 2px solid #e3f2fd;
        }
        
        .intro-section h2 {
            color: #0d47a1;
            margin-bottom: 25px;
            font-size: 2.2rem;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .intro-section h2 i {
            color: #2196f3;
        }
        
        .service-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }
        
        .service-card {
            background: #f8fdff;
            padding: 25px;
            border-radius: 10px;
            border-left: 5px solid #2196f3;
            transition: transform 0.3s ease;
        }
        
        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 10px rgba(33, 150, 243, 0.1);
        }
        
        .service-card h3 {
            color: #1565c0;
            margin-top: 10px;
            margin-bottom: 10px;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .service-card h3 i {
            color: #2196f3;
        }
        
        /* Pricing Section */
        .pricing-section {
            background: white;
            border-radius: 15px;
            padding: 40px;
            margin-bottom: 50px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            border: 2px solid #e3f2fd;
        }
        
        .section-title {
            color: #0d47a1;
            margin-bottom: 30px;
            font-size: 2.2rem;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .section-title i {
            color: #2196f3;
        }
        
        .gst-notice {
            text-align: center;
            color: #f44336;
            font-weight: 600;
            margin-bottom: 30px;
            padding: 15px;
            background: #ffebee;
            border-radius: 10px;
            border-left: 4px solid #f44336;
            font-size: 1.1rem;
        }
        
        /* Pricing Table */
        .pricing-table-container {
            overflow-x: auto;
            margin: 0 auto;
            width: 70%;
        }
        
        .pricing-table {
            width: 100%;
            border-collapse: collapse;
            margin: 0 auto;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .pricing-table th {
            background: linear-gradient(135deg, #2196f3 0%, #1976d2 100%);
            color: white;
            padding: 20px 15px;
            text-align: center;
            font-weight: 600;
            font-size: 1.1rem;
            border: none;
        }
        
        .pricing-table th:first-child {
            border-radius: 10px 0 0 0;
        }
        
        .pricing-table th:last-child {
            border-radius: 0 10px 0 0;
        }
        
        .pricing-table td {
            padding: 18px 15px;
            text-align: center;
            border-bottom: 1px solid #e0e0e0;
            font-size: 1.05rem;
        }
        
        .pricing-table tr:hover {
            background-color: #f8fdff;
        }
        
        .plan-cell {
            font-weight: 700;
            color: #0d47a1;
            font-size: 1.2rem;
        }
        
        .device-cell {
            color: #1565c0;
            font-weight: 600;
        }
        
        .price-header {
            background: linear-gradient(135deg, #4fc3f7 0%, #29b6f6 100%);
        }
        
        .price-subheader {
            background: #bbdefb;
            color: #0d47a1;
            font-size: 0.95rem;
            padding: 10px 15px !important;
        }
        
        .price-cell {
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .price-cell:hover {
            background: #e3f2fd !important;
            transform: scale(1.02);
        }
        
        .price-cell.selected {
            background: #bbdefb !important;
            box-shadow: inset 0 0 0 2px #2196f3;
        }
        
        .price-amount {
            font-weight: 700;
            color: #0d47a1;
            font-size: 1.2rem;
        }
        
        .price-period {
            font-size: 0.9rem;
            color: #546e7a;
            margin-top: 5px;
        }
        
        /* Select Plan Button */
        .select-plan-btn {
            display: inline-block;
            background: linear-gradient(135deg, #4361ee, #3a0ca3);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            margin-top: 10px;
            font-size: 0.9rem;
            transition: all 0.3s;
        }
        
        .select-plan-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(67, 97, 238, 0.3);
            color: white;
        }
        
        /* Confirmation Modal */
        .confirmation-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
            animation: modalSlide 0.3s ease;
        }
        
        @keyframes modalSlide {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .modal-header {
            color: #0d47a1;
            margin-bottom: 25px;
            text-align: center;
            font-size: 1.8rem;
        }
        
        .modal-details {
            background: #f8fdff;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            border-left: 4px solid #2196f3;
        }
        
        .detail-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px dashed #e0e0e0;
        }
        
        .detail-row:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        .detail-label {
            color: #546e7a;
            font-weight: 500;
        }
        
        .detail-value {
            color: #0d47a1;
            font-weight: 600;
        }
        
        .modal-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
        }
        
        .modal-btn {
            padding: 14px 40px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            border: none;
            transition: all 0.3s ease;
            min-width: 150px;
        }
        
        .btn-no {
            background: #f5f5f5;
            color: #757575;
        }
        
        .btn-no:hover {
            background: #e0e0e0;
            transform: translateY(-2px);
        }
        
        .btn-yes {
            background: linear-gradient(135deg, #2196f3 0%, #1976d2 100%);
            color: white;
        }
        
        .btn-yes:hover {
            background: linear-gradient(135deg, #1976d2 0%, #1565c0 100%);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(33, 150, 243, 0.3);
        }
        
        /* Admin Link */
        #adminFloatingLink {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 10000;
        }
        
        #adminLinkBtn {
            background: #1a237e;
            color: white;
            padding: 12px 20px;
            border-radius: 50px;
            text-decoration: none;
            font-size: 0.9rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            display: none;
            transition: all 0.3s ease;
        }
        
        #adminLinkBtn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }
        
        /* Responsive Design */
        @media (max-width: 1200px) {
            .pricing-table-container {
                width: 85%;
            }
        }
        
        @media (max-width: 992px) {
            .storage-hero h1 {
                font-size: 2.5rem;
            }
            
            .intro-section,
            .pricing-section {
                padding: 30px;
            }
            
            .pricing-table-container {
                width: 95%;
            }
            
            .pricing-table th,
            .pricing-table td {
                padding: 15px 10px;
                font-size: 1rem;
            }
        }
        
        @media (max-width: 768px) {
            .storage-hero {
                padding: 50px 15px 30px;
            }
            
            .storage-hero h1 {
                font-size: 2rem;
            }
            
            .storage-hero p {
                font-size: 1.05rem;
                line-height: 1.5;
                padding: 0 10px;
                text-align: center;
            }
            
            .storage-content {
                padding: 30px 15px;
            }
            
            .intro-section,
            .pricing-section {
                padding: 25px;
            }
            
            .section-title,
            .intro-section h2 {
                font-size: 1.8rem;
            }
            
            .pricing-table-container {
                width: 100%;
                overflow-x: auto;
            }
            
            .pricing-table {
                min-width: 800px;
            }
            
            .modal-buttons {
                flex-direction: column;
            }
            
            .modal-btn {
                width: 100%;
            }
        }
        
        @media (max-width: 480px) {
            .storage-hero h1 {
                font-size: 1.8rem;
            }
            
            .intro-section,
            .pricing-section {
                padding: 20px;
            }
            
            .service-details {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                padding: 25px;
                width: 95%;
            }
        }
    </style>
</head>
<body>
    <!-- ====== FIXED HEADER ====== -->
        <header>
        <div class="header-container">
            <div class="logo">
                <img src="images/logo1.jpg" alt="Odelya Locker Logo" class="logo-image">
                <span>Locker</span>
            </div>
            
            <!-- Navigation Container (Home + Hamburger) -->
            <div class="nav-right">
                <!-- Home Tab -->
                <a href="/index.html" class="home-nav">Home</a>
                
                <!-- Hamburger Menu -->
                <button class="hamburger" id="hamburger">
                    <i class="fas fa-bars"></i>
                </button>
                
                <!-- Dropdown Menu -->
                <div class="dropdown" id="dropdown">
                    <a href="/user-login.html">
                        <i class="fas fa-cogs"></i> User
                    </a>
					
                    <a href="/payment.html">
                        <i class="fas fa-credit-card"></i> Payment
                    </a>
                    <a href="/security.html">
                        <i class="fas fa-shield-alt"></i> Data Security
                    </a>
                    <a href="/terms.html">
                        <i class="fas fa-file-contract"></i> Terms
                    </a>
                    <a href="/privacy-policy.html">
                        <i class="fas fa-user-shield"></i> Privacy Policy
                    </a>
                    <a href="/contact.html">
                        <i class="fas fa-envelope"></i> Contact
                    </a>
                    <a href="/about.html">
                        <i class="fas fa-users"></i> About
                    </a>
                </div>
            </div>
        </div>
    
        <!-- Dropdown JavaScript -->
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const hamburger = document.getElementById('hamburger');
                const dropdown = document.getElementById('dropdown');
                
                if (hamburger && dropdown) {
                    hamburger.addEventListener('click', function(e) {
                        e.stopPropagation();
                        dropdown.classList.toggle('active');
                        
                        const icon = hamburger.querySelector('i');
                        if (dropdown.classList.contains('active')) {
                            icon.classList.remove('fa-bars');
                            icon.classList.add('fa-times');
                        } else {
                            icon.classList.remove('fa-times');
                            icon.classList.add('fa-bars');
                        }
                    });
                    
                    document.addEventListener('click', function(e) {
                        if (!dropdown.contains(e.target) && !hamburger.contains(e.target)) {
                            dropdown.classList.remove('active');
                            const icon = hamburger.querySelector('i');
                            icon.classList.remove('fa-times');
                            icon.classList.add('fa-bars');
                        }
                    });
                    
                    dropdown.addEventListener('click', function(e) {
                        if (e.target.tagName === 'A' || e.target.parentElement.tagName === 'A') {
                            dropdown.classList.remove('active');
                            const icon = hamburger.querySelector('i');
                            icon.classList.remove('fa-times');
                            icon.classList.add('fa-bars');
                        }
                    });
                    
                    document.addEventListener('keydown', function(e) {
                        if (e.key === 'Escape' && dropdown.classList.contains('active')) {
                            dropdown.classList.remove('active');
                            const icon = hamburger.querySelector('i');
                            icon.classList.remove('fa-times');
                            icon.classList.add('fa-bars');
                        }
                    });
                }
            });
        </script>
        
        <!-- Dropdown CSS -->
        <style>
            .dropdown {
                display: none;
                position: absolute;
                top: 100%;
                right: 20px;
                background: white;
                min-width: 220px;
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
                border-radius: 8px;
                z-index: 1000;
                padding: 10px 0;
                border: 1px solid #e0e7ff;
            }
            
            .dropdown.active {
                display: block !important;
    			animation: fadeIn 0.3s ease;
            }
            
            .dropdown a {
                display: flex;
                align-items: center;
                padding: 12px 20px;
                color: #37474f;
                text-decoration: none;
                font-weight: 500;
                transition: all 0.3s ease;
                border-left: 3px solid transparent;
            }
            
            .dropdown a:hover {
                background: #f8f9ff;
                color: #4361ee;
                border-left: 3px solid #4361ee;
                padding-left: 25px;
            }
            
            .dropdown a i {
                width: 25px;
                margin-right: 10px;
                color: #4361ee;
                font-size: 1.1rem;
            }
            
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(-10px); }
                to { opacity: 1; transform: translateY(0); }
            }
            
            @media (max-width: 768px) {
                .dropdown {
                    right: 15px;
                    min-width: 200px;
                }
            }
            
            @media (max-width: 480px) {
                .dropdown {
                    right: 10px;
                    min-width: 180px;
                }
                
                .dropdown a {
                    padding: 10px 15px;
                    font-size: 0.95rem;
                }
            }
        </style>
    </header>

    <!-- ====== MAIN CONTENT ====== -->
    <main>
        <!-- Hero Section -->
        <section class="storage-hero">
            <div class="container">
                <h1><i class="fas fa-cloud-upload-alt"></i> Secure Cloud Storage</h1>
                <p style="font-size: 1.2rem; max-width: 100%; line-height: 1.6; margin: 0 auto 20px;">
                    Military-grade encrypted cloud storage with end-to-end protection for your personal and business data
                </p>
            </div>
        </section>
        
        <!-- Main Content -->
        <div class="storage-content">
            <!-- Introduction Section -->
            <section class="intro-section">
                <h2><i class="fas fa-shield-alt"></i> Your Data, Our Priority</h2>
                <p>Odelya Cloud Digital Locker provides secure, encrypted cloud storage solutions designed to protect your valuable data with military-grade security. Our services are fully compliant with Indian data protection laws including the IT Act, 2000 and DPDP Act, 2023.</p>
                
                <div class="service-details">
                    <div class="service-card">
                        <h3><i class="fas fa-lock"></i> Encryption</h3>
                        <p style="text-align: justify;">
                        All your data is encrypted using AES-256 encryption both in transit and at rest. Only you have access to your decryption keys.
                        </p>
                    </div>
                    
                    <div class="service-card">
                        <h3><i class="fas fa-server"></i> 99.9% Uptime</h3>
                        <p style="text-align: justify;">
                        Our infrastructure ensures maximum availability with data centers located in Kolkata, India for optimal performance and compliance.
                        </p>
                    </div>
                    
                    <div class="service-card">
                        <h3><i class="fas fa-user-shield"></i> Multi-User Access</h3>
                        <p style="text-align: justify;">
                        Share secure storage with team members or family with controlled access permissions and activity monitoring.
                        </p>
                    </div>
                </div>
            </section>

            <!-- Pricing Section -->
            <section class="pricing-section">
                <h2 class="section-title"><i class="fas fa-tags"></i> Storage Plans & Pricing</h2>
                
                <div class="gst-notice" id="gstNotice">
                    <i class="fas fa-exclamation-circle"></i> All charges are inclusive of GST <span id="gstRateDisplay">18</span>%
                </div>
                
                <!-- Pricing Table -->
                <div class="pricing-table-container">
    <table class="pricing-table">
        <thead>
            <tr>
                <th>Plan (GB)</th>
                <th>Device(s)</th>
                <th colspan="2" class="price-header">Rate (Click to Buy)</th>
            </tr>
            <tr>
                <th></th>
                <th></th>
                <th class="price-subheader">Monthly</th>
                <th class="price-subheader">Yearly</th>
            </tr>
        </thead>
        <tbody id="pricing-table-body">
            <!-- Table rows will be inserted here by JavaScript -->
        </tbody>
    </table>
</div>
            </section>

            <!-- Confirmation Modal -->
            <div class="confirmation-modal" id="confirmationModal">
                <div class="modal-content">
                    <h3 class="modal-header"><i class="fas fa-shopping-cart"></i> Confirm Your Selection</h3>
                    
                    <div class="modal-details" id="modalDetails">
                        <!-- Details will be populated by JavaScript -->
                    </div>
                    
                    <div class="modal-buttons">
                        <button class="modal-btn btn-no" id="btnNo">No, Cancel</button>
                        <button class="modal-btn btn-yes" id="btnYes">Yes, Proceed to Registration</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- ====== FIXED FOOTER ====== -->
    <footer>
        <div class="container footer-content">
            <div class="footer-text">
                <p class="company-name">A Product of Odelya Management Pvt Ltd</p>
                <p class="copyright">¬© 2025 OMPL | All rights reserved</p>

                <!-- Footer Links -->
                <div class="footer-links">
                    <a href="/index.html" style="font-size: 1.1em; font-weight: 600;">Home</a>
                    <span class="separator">|</span>
                    <a href="/security.html" style="font-size: 1.1em; font-weight: 600;">Data Security</a>
                    <span class="separator">|</span>
                    <a href="/terms.html" style="font-size: 1.1em; font-weight: 600;">Terms</a>
                    <span class="separator">|</span>
                    <a href="/privacy-policy.html" style="font-size: 1.1em; font-weight: 600;">Privacy Policy</a>
                    <span class="separator">|</span>
                    <a href="/contact.html" style="font-size: 1.1em; font-weight: 600;">Contact</a>
                    <span class="separator">|</span>
                    <a href="/about.html" style="font-size: 1.1em; font-weight: 600;">About</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Admin Floating Link (Hidden by default) -->
    <div id="adminFloatingLink">
        <a href="price-admin.html" id="adminLinkBtn">
            <i class="fas fa-cog"></i> Admin
        </a>
    </div>

<script>
    // ====== FIREBASE PRICING CONFIGURATION ======
    let pricingConfig = {
        plans: [
            { storage: 10, devices: 1 },
            { storage: 30, devices: 2 },
            { storage: 50, devices: 2 },
            { storage: 70, devices: 3 },
            { storage: 100, devices: 3 },
            { storage: 200, devices: 4 },
            { storage: 300, devices: 4 },
            { storage: 400, devices: 4 },
            { storage: 500, devices: 5 }
        ],
        
        normalDiscounts: {
            10: 5,    // 5% for 10GB
            30: 5,    // 5% for 30GB
            50: 10,   // 10% for 50GB
            70: 10,   // 10% for 70GB
            100: 15,  // 15% for 100GB
            200: 15,  // 15% for 200GB
            300: 20,  // 20% for 300GB
            400: 20,  // 20% for 400GB
            500: 25   // 25% for 500GB
        },
        
        // These will be loaded from Firebase
        dataRate: 1.5,        // ‚Çπ per GB
        gstRate: 18,          // GST percentage
        
        // Current selection
        selectedPlan: null,
        selectedPeriod: null,
        selectedAmount: null
    };

    // ====== LOAD PRICING FROM FIREBASE ======
    async function loadPricingFromFirebase() {
        try {
            console.log('Loading pricing from Firebase...');
            
            const pricingRef = window.firebaseDoc(window.firebaseDb, "settings", "pricing");
            const docSnap = await window.getDoc(pricingRef);
            
            if (docSnap.exists()) {
                const data = docSnap.data();
                
                pricingConfig.dataRate = data.dataRate || 1.5;
                pricingConfig.gstRate = data.gstRate || 18;
                
                // Update GST display
                document.getElementById('gstRateDisplay').textContent = pricingConfig.gstRate;
                
                console.log('‚úÖ Pricing loaded from Firebase:', {
                    dataRate: pricingConfig.dataRate,
                    gstRate: pricingConfig.gstRate
                });
                
                return true;
            } else {
                // Create default pricing in Firebase
                await window.setDoc(pricingRef, {
                    dataRate: 1.5,
                    gstRate: 18,
                    lastUpdated: new Date().toISOString()
                });
                
                console.log('‚ö†Ô∏è Created default pricing in Firebase');
                return true;
            }
        } catch (error) {
            console.error('‚ùå Error loading pricing from Firebase:', error);
            return false;
        }
    }

    // ====== FORMAT CURRENCY ======
    function formatCurrency(amount) {
        return 'INR ' + amount.toLocaleString('en-IN', {
            minimumFractionDigits: 0,
            maximumFractionDigits: 0
        });
    }

    // ====== CALCULATE PRICES ======
    function calculatePrices() {
        const results = [];
        
        pricingConfig.plans.forEach(plan => {
            const calculatedMonthly = plan.storage * pricingConfig.dataRate;
            
            // Add GST
            const gstAmountMonthly = calculatedMonthly * (pricingConfig.gstRate / 100);
            const payableMonthly = Math.round(calculatedMonthly + gstAmountMonthly);
            
            // Yearly calculation
            const calculatedYearly = calculatedMonthly * 12;
            const normalDiscount = pricingConfig.normalDiscounts[plan.storage] || 0;
            
            // Apply normal discount for yearly plans
            let grossYearly = calculatedYearly;
            if (normalDiscount > 0) {
                const normalDiscountAmount = calculatedYearly * (normalDiscount / 100);
                grossYearly -= normalDiscountAmount;
            }
            
            // Add GST
            const gstAmountYearly = grossYearly * (pricingConfig.gstRate / 100);
            const payableYearly = Math.round(grossYearly + gstAmountYearly);
            
            results.push({
                storage: plan.storage,
                devices: plan.devices,
                payableMonthly,
                payableYearly,
                normalDiscount
            });
        });
        
        return results;
    }

    // ====== RENDER PRICING TABLE ======
    function renderPricingTable() {
        const tableBody = document.getElementById('pricing-table-body');
        
        if (!tableBody) {
            console.error('‚ùå Table body element not found!');
            return;
        }
        
        const prices = calculatePrices();
        
        console.log('Rendering pricing table with', prices.length, 'plans');
        
        tableBody.innerHTML = '';
        
        prices.forEach((price, index) => {
            const row = document.createElement('tr');
            
            // Create "Select Plan" buttons with proper links
            const monthlyLink = `user-panel.html?plan=${price.storage}GB Monthly&size=${price.storage}&price=${price.payableMonthly}`;
            const yearlyLink = `user-panel.html?plan=${price.storage}GB Yearly&size=${price.storage}&price=${price.payableYearly}`;
            
            row.innerHTML = `
                <td class="plan-cell">${price.storage} GB</td>
                <td class="device-cell">${price.devices} Device${price.devices > 1 ? 's' : ''}</td>
                <td class="price-cell">
                    <div class="price-amount">${formatCurrency(price.payableMonthly)}</div>
                    <div class="price-period">per month</div>
                    <a href="${monthlyLink}" class="select-plan-btn">Select Plan</a>
                </td>
                <td class="price-cell">
                    <div class="price-amount">${formatCurrency(price.payableYearly)}</div>
                    <div class="price-period">per year</div>
                    <a href="${yearlyLink}" class="select-plan-btn">Select Plan</a>
                </td>
            `;
            tableBody.appendChild(row);
        });
        
        console.log('‚úÖ Pricing table rendered');
    }

    // ====== LISTEN FOR PRICING UPDATES (SILENT) ======
    function listenForPricingUpdates() {
        try {
            const pricingRef = window.firebaseDoc(window.firebaseDb, "settings", "pricing");
            
            window.onSnapshot(pricingRef, (doc) => {
                if (doc.exists()) {
                    const data = doc.data();
                    
                    const oldDataRate = pricingConfig.dataRate;
                    const oldGstRate = pricingConfig.gstRate;
                    
                    pricingConfig.dataRate = data.dataRate || 1.5;
                    pricingConfig.gstRate = data.gstRate || 18;
                    
                    // Update GST display
                    document.getElementById('gstRateDisplay').textContent = pricingConfig.gstRate;
                    
                    // Only update if values changed
                    if (oldDataRate !== pricingConfig.dataRate || oldGstRate !== pricingConfig.gstRate) {
                        renderPricingTable();
                        console.log('üîÑ Prices updated in real-time (silent)');
                    }
                }
            });
            
            console.log('‚úÖ Listening for pricing updates');
        } catch (error) {
            console.error('‚ùå Error setting up pricing listener:', error);
        }
    }

    // ====== ADMIN LINK MANAGEMENT ======
    function setupAdminLink() {
        const adminLink = document.getElementById('adminLinkBtn');
        
        if (!adminLink) {
            console.error('‚ùå Admin link element not found!');
            return;
        }
        
        // HIDDEN BY DEFAULT
        adminLink.style.display = 'none';
        
        // Check for special admin mode (temporary)
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get('admin') === 'true') {
            adminLink.style.display = 'block';
        }
        
        // Check for password in URL
        const adminPassword = urlParams.get('admin_pass');
        if (adminPassword === 'odelya123') {
            adminLink.style.display = 'block';
        }
        
        // Keyboard shortcut
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.altKey && e.key.toLowerCase() === 'a') {
                e.preventDefault();
                
                const isVisible = adminLink.style.display === 'block';
                adminLink.style.display = isVisible ? 'none' : 'block';
                
                if (!isVisible) {
                    const password = prompt('Enter admin password:');
                    if (password !== 'odelya123') {
                        adminLink.style.display = 'none';
                        alert('Incorrect password');
                        return;
                    }
                }
                
                console.log(`Admin link ${isVisible ? 'hidden' : 'shown'} (temporary)`);
            }
        });
        
        console.log('‚úÖ Admin link setup complete');
    }

    // ====== INITIALIZE PAGE ======
    async function initializePage() {
        console.log('üöÄ Initializing cloud storage page...');
        
        // Check if Firebase is loaded
        if (!window.firebaseDb) {
            console.error('‚ùå Firebase not loaded!');
            // Render table anyway with defaults
            renderPricingTable();
            setupAdminLink();
            return;
        }
        
        // Load pricing from Firebase
        const pricingLoaded = await loadPricingFromFirebase();
        
        if (pricingLoaded) {
            // Render pricing table
            renderPricingTable();
            
            // Listen for real-time updates
            listenForPricingUpdates();
            
            // Setup admin link
            setupAdminLink();
            
            console.log('‚úÖ Page initialized successfully');
        } else {
            // Fallback if Firebase fails
            console.log('‚ö†Ô∏è Using default pricing');
            renderPricingTable();
            setupAdminLink();
        }
    }

    // ====== START INITIALIZATION ======
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initializePage);
    } else {
        initializePage();
    }
</script>

    
</body>
</html>
