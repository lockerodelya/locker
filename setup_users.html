<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Database Setup - cloud.online</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #2c3e50, #4a6491);
            min-height: 100vh;
            padding: 30px 20px;
            color: #333;
        }
        
        .setup-container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.25);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(to right, #1a2980, #26d0ce);
            color: white;
            padding: 25px 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 15px;
        }
        
        .warning-box {
            background: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 15px;
            margin: 20px;
            border-radius: 5px;
        }
        
        .warning-box h3 {
            color: #856404;
            margin-bottom: 8px;
        }
        
        .form-container {
            padding: 30px;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 25px;
            border-bottom: 2px solid #eee;
        }
        
        .tab {
            padding: 12px 25px;
            background: #f8f9fa;
            border: none;
            cursor: pointer;
            font-weight: 600;
            color: #6c757d;
            border-radius: 8px 8px 0 0;
            margin-right: 5px;
            transition: all 0.3s;
        }
        
        .tab.active {
            background: #1a2980;
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .section-title {
            color: #1a2980;
            margin: 25px 0 15px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid #eaeaea;
            font-size: 20px;
        }
        
        .row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .input-group {
            flex: 1;
            min-width: 250px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: #2c3e50;
            font-weight: 600;
            font-size: 14px;
        }
        
        .input-group input, .input-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 15px;
            transition: all 0.3s;
        }
        
        .input-group input:focus, .input-group select:focus {
            border-color: #1a2980;
            outline: none;
            box-shadow: 0 0 0 3px rgba(26, 41, 128, 0.1);
        }
        
        .required::after {
            content: " *";
            color: #e74c3c;
        }
        
        .service-plan {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-top: 15px;
            border-left: 4px solid #1a2980;
        }
        
        .actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        
        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .btn-save {
            background: linear-gradient(to right, #27ae60, #219653);
            color: white;
        }
        
        .btn-save:hover {
            background: linear-gradient(to right, #219653, #1e8449);
            transform: translateY(-2px);
        }
        
        .btn-reset {
            background: #95a5a6;
            color: white;
        }
        
        .btn-reset:hover {
            background: #7f8c8d;
        }
        
        .btn-download {
            background: linear-gradient(to right, #3498db, #2980b9);
            color: white;
        }
        
        .btn-download:hover {
            background: linear-gradient(to right, #2980b9, #1f639b);
        }
        
        .output-area {
            margin-top: 30px;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            border: 2px dashed #bdc3c7;
            display: none;
        }
        
        .output-area h3 {
            color: #2c3e50;
            margin-bottom: 15px;
        }
        
        textarea {
            width: 100%;
            height: 200px;
            padding: 15px;
            border: 1px solid #bdc3c7;
            border-radius: 8px;
            font-family: monospace;
            font-size: 14px;
            resize: vertical;
        }
        
        .instructions {
            background: #e8f4fc;
            padding: 20px;
            border-radius: 10px;
            margin-top: 25px;
            border-left: 4px solid #3498db;
        }
        
        .instructions h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .instructions ol {
            margin-left: 20px;
            margin-top: 10px;
        }
        
        .instructions li {
            margin-bottom: 8px;
        }
        
        @media (max-width: 768px) {
            .row {
                flex-direction: column;
            }
            
            .input-group {
                min-width: 100%;
            }
            
            .actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="setup-container">
        <div class="header">
            <h1><i class="fas fa-database"></i> User Database Setup</h1>
            <p>Administrator Tool - Fill User Information Securely</p>
        </div>
        
        <div class="warning-box">
            <h3><i class="fas fa-exclamation-triangle"></i> IMPORTANT SECURITY NOTICE</h3>
            <p>1. This page is ONLY for administrator use. Do not share with users.</p>
            <p>2. Save the generated encrypted data in: <strong>D:\Odelya Locker\Webpage to Server\users.encrypted</strong></p>
            <p>3. Keep your encryption password secure and never share it.</p>
        </div>
        
        <div class="form-container">
            <div class="tabs">
                <button class="tab active" onclick="switchTab(1)">User Information</button>
                <button class="tab" onclick="switchTab(2)">Service Details</button>
                <button class="tab" onclick="switchTab(3)">Generate Data</button>
            </div>
            
            <div id="tab1" class="tab-content active">
                <h3 class="section-title">Personal Information</h3>
                <div class="row">
                    <div class="input-group">
                        <label class="required">User ID</label>
                        <input type="text" id="userId" placeholder="Same as Windows account username">
                    </div>
                    <div class="input-group">
                        <label class="required">Initial Password</label>
                        <input type="text" id="initialPassword" placeholder="Default password for user">
                    </div>
                </div>
                
                <div class="row">
                    <div class="input-group">
                        <label class="required">Full Name</label>
                        <input type="text" id="fullName" placeholder="Complete name as per records">
                    </div>
                    <div class="input-group">
                        <label class="required">Date of Birth</label>
                        <input type="date" id="dob">
                    </div>
                </div>
                
                <div class="row">
                    <div class="input-group">
                        <label class="required">Phone Number</label>
                        <input type="tel" id="phone" placeholder="10-digit mobile number">
                    </div>
                    <div class="input-group">
                        <label class="required">Email Address</label>
                        <input type="email" id="email" placeholder="official email address">
                    </div>
                </div>
                
                <div class="row">
                    <div class="input-group">
                        <label class="required">Gender</label>
                        <select id="gender">
                            <option value="">Select Gender</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label>PAN Number</label>
                        <input type="text" id="pan" placeholder="ABCDE1234F" maxlength="10">
                    </div>
                </div>
                
                <div class="row">
                    <div class="input-group">
                        <label>Aadhaar Number</label>
                        <input type="text" id="aadhaar" placeholder="12-digit number" maxlength="12">
                    </div>
                </div>
            </div>
            
            <div id="tab2" class="tab-content">
                <h3 class="section-title">Cloud Service Subscription</h3>
                
                <div class="service-plan">
                    <div class="row">
                        <div class="input-group">
                            <label class="required">Plan Name</label>
                            <select id="planName">
                                <option value="">Select Plan</option>
                                <option value="Basic - 50GB">Basic - 50GB Storage</option>
                                <option value="Standard - 100GB">Standard - 100GB Storage</option>
                                <option value="Premium - 250GB">Premium - 250GB Storage</option>
                                <option value="Enterprise - 500GB">Enterprise - 500GB Storage</option>
                                <option value="Ultimate - 1TB">Ultimate - 1TB Storage</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label class="required">Storage (GB)</label>
                            <input type="number" id="storageGB" placeholder="e.g., 100" min="10" max="5000">
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="input-group">
                            <label class="required">Duration (Months)</label>
                            <select id="duration">
                                <option value="">Select Duration</option>
                                <option value="1">1 Month</option>
                                <option value="3">3 Months</option>
                                <option value="6">6 Months</option>
                                <option value="12">12 Months</option>
                                <option value="24">24 Months</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label class="required">Start Date</label>
                            <input type="date" id="startDate">
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="input-group">
                            <label class="required">End Date</label>
                            <input type="date" id="endDate">
                        </div>
                        <div class="input-group">
                            <label class="required">Amount Paid (â‚¹)</label>
                            <input type="number" id="amountPaid" placeholder="e.g., 2999" step="0.01">
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="tab3" class="tab-content">
                <h3 class="section-title">Generate Encrypted User Data</h3>
                
                <div class="row">
                    <div class="input-group">
                        <label class="required">Encryption Password</label>
                        <input type="password" id="encryptionKey" placeholder="Create strong password for encryption">
                        <small style="color: #666; margin-top: 5px; display: block;">
                            This password encrypts all user data. Save it securely!
                        </small>
                    </div>
                </div>
                
                <div class="actions">
                    <button class="btn btn-save" onclick="saveUser()">
                        <i class="fas fa-save"></i> Save User to Database
                    </button>
                    <button class="btn btn-download" onclick="generateEncryptedData()">
                        <i class="fas fa-lock"></i> Generate Encrypted Data
                    </button>
                    <button class="btn btn-reset" onclick="resetForm()">
                        <i class="fas fa-redo"></i> Reset Form
                    </button>
                </div>
                
                <div class="output-area" id="outputArea">
                    <h3><i class="fas fa-file-code"></i> Encrypted User Data</h3>
                    <p>Copy this text and save as: <strong>users.encrypted</strong> in your server folder</p>
                    <textarea id="encryptedOutput" readonly></textarea>
                    <div style="margin-top: 15px;">
                        <button class="btn btn-download" onclick="copyToClipboard()">
                            <i class="fas fa-copy"></i> Copy to Clipboard
                        </button>
                        <button class="btn btn-save" onclick="saveAsFile()">
                            <i class="fas fa-download"></i> Save as File
                        </button>
                    </div>
                </div>
                
                <div class="instructions">
                    <h3><i class="fas fa-info-circle"></i> Setup Instructions:</h3>
                    <ol>
                        <li>Fill ALL required fields in Tabs 1 & 2</li>
                        <li>Create a strong encryption password</li>
                        <li>Click "Save User to Database" (saves locally in browser)</li>
                        <li>Click "Generate Encrypted Data"</li>
                        <li>Copy the encrypted text</li>
                        <li>Create file: <code>D:\Odelya Locker\Webpage to Server\users.encrypted</code></li>
                        <li>Paste the encrypted text and save</li>
                        <li>Repeat for each user</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab switching
        function switchTab(tabNumber) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById('tab' + tabNumber).classList.add('active');
            document.querySelectorAll('.tab')[tabNumber - 1].classList.add('active');
        }
        
        // Auto-calculate end date based on start date and duration
        document.getElementById('startDate').addEventListener('change', function() {
            calculateEndDate();
        });
        
        document.getElementById('duration').addEventListener('change', function() {
            calculateEndDate();
        });
        
        function calculateEndDate() {
            const startDate = document.getElementById('startDate').value;
            const duration = document.getElementById('duration').value;
            
            if (startDate && duration) {
                const start = new Date(startDate);
                const end = new Date(start);
                end.setMonth(end.getMonth() + parseInt(duration));
                
                // Format to YYYY-MM-DD
                const endStr = end.toISOString().split('T')[0];
                document.getElementById('endDate').value = endStr;
            }
        }
        
        // Auto-calculate storage from plan name
        document.getElementById('planName').addEventListener('change', function() {
            const plan = this.value;
            if (plan.includes('50GB')) document.getElementById('storageGB').value = 50;
            else if (plan.includes('100GB')) document.getElementById('storageGB').value = 100;
            else if (plan.includes('250GB')) document.getElementById('storageGB').value = 250;
            else if (plan.includes('500GB')) document.getElementById('storageGB').value = 500;
            else if (plan.includes('1TB')) document.getElementById('storageGB').value = 1024;
        });
        
        // Simple encryption function (AES simulation - in production use Web Crypto API)
        function simpleEncrypt(text, password) {
            // This is a simplified encryption for demo
            // In final version, we'll use Web Crypto API for real encryption
            let result = '';
            for (let i = 0; i < text.length; i++) {
                const charCode = text.charCodeAt(i) ^ password.charCodeAt(i % password.length);
                result += String.fromCharCode(charCode);
            }
            return btoa(result); // Base64 encode
        }
        
        // Store users in browser's local storage (temporary)
        function saveUser() {
            // Validate required fields
            const requiredFields = [
                'userId', 'initialPassword', 'fullName', 'dob', 
                'phone', 'email', 'gender', 'planName', 'storageGB',
                'duration', 'startDate', 'endDate', 'amountPaid'
            ];
            
            for (const fieldId of requiredFields) {
                const field = document.getElementById(fieldId);
                if (!field.value.trim()) {
                    alert(`Please fill in: ${field.placeholder || fieldId}`);
                    field.focus();
                    return;
                }
            }
            
            // Create user object
            const user = {
                userId: document.getElementById('userId').value,
                password: document.getElementById('initialPassword').value, // Will be hashed later
                personalInfo: {
                    fullName: document.getElementById('fullName').value,
                    dob: document.getElementById('dob').value,
                    phone: document.getElementById('phone').value,
                    email: document.getElementById('email').value,
                    gender: document.getElementById('gender').value,
                    pan: document.getElementById('pan').value || 'Not Provided',
                    aadhaar: document.getElementById('aadhaar').value || 'Not Provided'
                },
                serviceInfo: {
                    planName: document.getElementById('planName').value,
                    storageGB: parseInt(document.getElementById('storageGB').value),
                    duration: parseInt(document.getElementById('duration').value),
                    startDate: document.getElementById('startDate').value,
                    endDate: document.getElementById('endDate').value,
                    amountPaid: parseFloat(document.getElementById('amountPaid').value)
                },
                lastUpdated: new Date().toISOString()
            };
            
            // Get existing users or create new array
            let users = JSON.parse(localStorage.getItem('cloud_users') || '[]');
            
            // Check if user already exists
            const existingIndex = users.findIndex(u => u.userId === user.userId);
            if (existingIndex !== -1) {
                users[existingIndex] = user;
                alert(`User "${user.userId}" updated successfully!`);
            } else {
                users.push(user);
                alert(`User "${user.userId}" added successfully!`);
            }
            
            // Save to local storage
            localStorage.setItem('cloud_users', JSON.stringify(users));
            
            // Switch to tab 3
            switchTab(3);
        }
        
        // Generate encrypted data
        function generateEncryptedData() {
            const encryptionKey = document.getElementById('encryptionKey').value;
            if (!encryptionKey || encryptionKey.length < 8) {
                alert('Please enter a strong encryption password (min 8 characters)');
                return;
            }
            
            // Get users from local storage
            const users = JSON.parse(localStorage.getItem('cloud_users') || '[]');
            if (users.length === 0) {
                alert('No users found. Please save at least one user first.');
                return;
            }
            
            // Convert to JSON string
            const usersJson = JSON.stringify(users);
            
            // Encrypt the data
            const encryptedData = simpleEncrypt(usersJson, encryptionKey);
            
            // Display encrypted data
            document.getElementById('encryptedOutput').value = encryptedData;
            document.getElementById('outputArea').style.display = 'block';
            
            alert(`Encrypted data generated for ${users.length} user(s).`);
        }
        
        // Copy to clipboard
        function copyToClipboard() {
            const textarea = document.getElementById('encryptedOutput');
            textarea.select();
            textarea.setSelectionRange(0, 99999); // For mobile
            document.execCommand('copy');
            alert('Encrypted data copied to clipboard!');
        }
        
        // Save as file
        function saveAsFile() {
            const encryptedData = document.getElementById('encryptedOutput').value;
            const blob = new Blob([encryptedData], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'users.encrypted';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
        
        // Reset form
        function resetForm() {
            if (confirm('Are you sure you want to reset the form? All unsaved data will be lost.')) {
                document.querySelectorAll('input, select').forEach(element => {
                    if (element.type !== 'button' && element.type !== 'submit') {
                        element.value = '';
                    }
                });
            }
        }
        
        // Auto-set today's date as start date
        window.onload = function() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('startDate').value = today;
            calculateEndDate();
        };
    </script>
</body>
</html>
